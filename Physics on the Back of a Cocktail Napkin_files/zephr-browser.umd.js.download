!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).zephrBrowser={})}(this,function(e){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){var t={exports:{}};return e(t,t.exports),t.exports}var r=function(e){return e&&e.Math==Math&&e},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")(),i=function(e){try{return!!e()}catch(e){return!0}},c=!i(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),u={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,s={f:a&&!u.call({1:2},1)?function(e){var t=a(this,e);return!!t&&t.enumerable}:u},f=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},l={}.toString,p=function(e){return l.call(e).slice(8,-1)},d="".split,h=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==p(e)?d.call(e,""):Object(e)}:Object,v=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},m=function(e){return h(v(e))},y=function(e){return"object"==typeof e?null!==e:"function"==typeof e},g=function(e,t){if(!y(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!y(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!y(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!y(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,w=function(e,t){return b.call(e,t)},E=o.document,S=y(E)&&y(E.createElement),x=function(e){return S?E.createElement(e):{}},I=!c&&!i(function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a}),O=Object.getOwnPropertyDescriptor,T={f:c?O:function(e,t){if(e=m(e),t=g(t,!0),I)try{return O(e,t)}catch(e){}if(w(e,t))return f(!s.f.call(e,t),e[t])}},j=function(e){if(!y(e))throw TypeError(String(e)+" is not an object");return e},A=Object.defineProperty,P={f:c?A:function(e,t,n){if(j(e),t=g(t,!0),j(n),I)try{return A(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},C=c?function(e,t,n){return P.f(e,t,f(1,n))}:function(e,t,n){return e[t]=n,e},L=function(e,t){try{C(o,e,t)}catch(n){o[e]=t}return t},_="__core-js_shared__",R=o[_]||L(_,{}),N=Function.toString;"function"!=typeof R.inspectSource&&(R.inspectSource=function(e){return N.call(e)});var D,F,M,k=R.inspectSource,U=o.WeakMap,H="function"==typeof U&&/native code/.test(k(U)),G=n(function(e){(e.exports=function(e,t){return R[e]||(R[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.1",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})}),B=0,z=Math.random(),V=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++B+z).toString(36)},Z=G("keys"),q=function(e){return Z[e]||(Z[e]=V(e))},$={};if(H){var Y=R.state||(R.state=new(0,o.WeakMap)),W=Y.get,K=Y.has,X=Y.set;D=function(e,t){return t.facade=e,X.call(Y,e,t),t},F=function(e){return W.call(Y,e)||{}},M=function(e){return K.call(Y,e)}}else{var J=q("state");$[J]=!0,D=function(e,t){return t.facade=e,C(e,J,t),t},F=function(e){return w(e,J)?e[J]:{}},M=function(e){return w(e,J)}}var Q,ee,te={set:D,get:F,has:M,enforce:function(e){return M(e)?F(e):D(e,{})},getterFor:function(e){return function(t){var n;if(!y(t)||(n=F(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},ne=n(function(e){var t=te.get,n=te.enforce,r=String(String).split("String");(e.exports=function(e,t,i,c){var u,a=!!c&&!!c.unsafe,s=!!c&&!!c.enumerable,f=!!c&&!!c.noTargetGet;"function"==typeof i&&("string"!=typeof t||w(i,"name")||C(i,"name",t),(u=n(i)).source||(u.source=r.join("string"==typeof t?t:""))),e!==o?(a?!f&&e[t]&&(s=!0):delete e[t],s?e[t]=i:C(e,t,i)):s?e[t]=i:L(t,i)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||k(this)})}),re=o,oe=function(e){return"function"==typeof e?e:void 0},ie=function(e,t){return arguments.length<2?oe(re[e])||oe(o[e]):re[e]&&re[e][t]||o[e]&&o[e][t]},ce=Math.ceil,ue=Math.floor,ae=function(e){return isNaN(e=+e)?0:(e>0?ue:ce)(e)},se=Math.min,fe=function(e){return e>0?se(ae(e),9007199254740991):0},le=Math.max,pe=Math.min,de=function(e,t){var n=ae(e);return n<0?le(n+t,0):pe(n,t)},he=function(e){return function(t,n,r){var o,i=m(t),c=fe(i.length),u=de(r,c);if(e&&n!=n){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((e||u in i)&&i[u]===n)return e||u||0;return!e&&-1}},ve={includes:he(!0),indexOf:he(!1)},me=ve.indexOf,ye=function(e,t){var n,r=m(e),o=0,i=[];for(n in r)!w($,n)&&w(r,n)&&i.push(n);for(;t.length>o;)w(r,n=t[o++])&&(~me(i,n)||i.push(n));return i},ge=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],be=ge.concat("length","prototype"),we={f:Object.getOwnPropertyNames||function(e){return ye(e,be)}},Ee={f:Object.getOwnPropertySymbols},Se=ie("Reflect","ownKeys")||function(e){var t=we.f(j(e)),n=Ee.f;return n?t.concat(n(e)):t},xe=function(e,t){for(var n=Se(t),r=P.f,o=T.f,i=0;i<n.length;i++){var c=n[i];w(e,c)||r(e,c,o(t,c))}},Ie=/#|\.prototype\./,Oe=function(e,t){var n=je[Te(e)];return n==Pe||n!=Ae&&("function"==typeof t?i(t):!!t)},Te=Oe.normalize=function(e){return String(e).replace(Ie,".").toLowerCase()},je=Oe.data={},Ae=Oe.NATIVE="N",Pe=Oe.POLYFILL="P",Ce=Oe,Le=T.f,_e=function(e,t){var n,r,i,c,u,a=e.target,s=e.global,f=e.stat;if(n=s?o:f?o[a]||L(a,{}):(o[a]||{}).prototype)for(r in t){if(c=t[r],i=e.noTargetGet?(u=Le(n,r))&&u.value:n[r],!Ce(s?r:a+(f?".":"#")+r,e.forced)&&void 0!==i){if(typeof c==typeof i)continue;xe(c,i)}(e.sham||i&&i.sham)&&C(c,"sham",!0),ne(n,r,c,e)}},Re=o.Promise,Ne="process"==p(o.process),De=ie("navigator","userAgent")||"",Fe=o.process,Me=Fe&&Fe.versions,ke=Me&&Me.v8;ke?ee=(Q=ke.split("."))[0]+Q[1]:De&&(!(Q=De.match(/Edge\/(\d+)/))||Q[1]>=74)&&(Q=De.match(/Chrome\/(\d+)/))&&(ee=Q[1]);var Ue=ee&&+ee,He=!!Object.getOwnPropertySymbols&&!i(function(){return!Symbol.sham&&(Ne?38===Ue:Ue>37&&Ue<41)}),Ge=He&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Be=G("wks"),ze=o.Symbol,Ve=Ge?ze:ze&&ze.withoutSetter||V,Ze=function(e){return w(Be,e)&&(He||"string"==typeof Be[e])||(Be[e]=He&&w(ze,e)?ze[e]:Ve("Symbol."+e)),Be[e]},qe=P.f,$e=Ze("toStringTag"),Ye=function(e,t,n){e&&!w(e=n?e:e.prototype,$e)&&qe(e,$e,{configurable:!0,value:t})},We=Ze("species"),Ke=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Xe={},Je=Ze("iterator"),Qe=Array.prototype,et=function(e){return void 0!==e&&(Xe.Array===e||Qe[Je]===e)},tt=function(e,t,n){if(Ke(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},nt={};nt[Ze("toStringTag")]="z";var rt="[object z]"===String(nt),ot=Ze("toStringTag"),it="Arguments"==p(function(){return arguments}()),ct=rt?p:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ot))?n:it?p(t):"Object"==(r=p(t))&&"function"==typeof t.callee?"Arguments":r},ut=Ze("iterator"),at=function(e){if(null!=e)return e[ut]||e["@@iterator"]||Xe[ct(e)]},st=function(e){var t=e.return;if(void 0!==t)return j(t.call(e)).value},ft=function(e,t){this.stopped=e,this.result=t},lt=function(e,t,n){var r,o,i,c,u,a,s,f=!(!n||!n.AS_ENTRIES),l=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),d=tt(t,n&&n.that,1+f+p),h=function(e){return r&&st(r),new ft(!0,e)},v=function(e){return f?(j(e),p?d(e[0],e[1],h):d(e[0],e[1])):p?d(e,h):d(e)};if(l)r=e;else{if("function"!=typeof(o=at(e)))throw TypeError("Target is not iterable");if(et(o)){for(i=0,c=fe(e.length);c>i;i++)if((u=v(e[i]))&&u instanceof ft)return u;return new ft(!1)}r=o.call(e)}for(a=r.next;!(s=a.call(r)).done;){try{u=v(s.value)}catch(e){throw st(r),e}if("object"==typeof u&&u&&u instanceof ft)return u}return new ft(!1)},pt=Ze("iterator"),dt=!1;try{var ht=0,vt={next:function(){return{done:!!ht++}},return:function(){dt=!0}};vt[pt]=function(){return this},Array.from(vt,function(){throw 2})}catch(e){}var mt,yt,gt,bt=function(e,t){if(!t&&!dt)return!1;var n=!1;try{var r={};r[pt]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},wt=Ze("species"),Et=function(e,t){var n,r=j(e).constructor;return void 0===r||null==(n=j(r)[wt])?t:Ke(n)},St=ie("document","documentElement"),xt=/(iphone|ipod|ipad).*applewebkit/i.test(De),It=o.location,Ot=o.setImmediate,Tt=o.clearImmediate,jt=o.process,At=o.MessageChannel,Pt=o.Dispatch,Ct=0,Lt={},_t=function(e){if(Lt.hasOwnProperty(e)){var t=Lt[e];delete Lt[e],t()}},Rt=function(e){return function(){_t(e)}},Nt=function(e){_t(e.data)},Dt=function(e){o.postMessage(e+"",It.protocol+"//"+It.host)};Ot&&Tt||(Ot=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Lt[++Ct]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},mt(Ct),Ct},Tt=function(e){delete Lt[e]},Ne?mt=function(e){jt.nextTick(Rt(e))}:Pt&&Pt.now?mt=function(e){Pt.now(Rt(e))}:At&&!xt?(gt=(yt=new At).port2,yt.port1.onmessage=Nt,mt=tt(gt.postMessage,gt,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&It&&"file:"!==It.protocol&&!i(Dt)?(mt=Dt,o.addEventListener("message",Nt,!1)):mt="onreadystatechange"in x("script")?function(e){St.appendChild(x("script")).onreadystatechange=function(){St.removeChild(this),_t(e)}}:function(e){setTimeout(Rt(e),0)});var Ft,Mt,kt,Ut,Ht,Gt,Bt,zt,Vt={set:Ot,clear:Tt},Zt=/web0s(?!.*chrome)/i.test(De),qt=Vt.set,$t=o.MutationObserver||o.WebKitMutationObserver,Yt=o.document,Wt=o.process,Kt=o.Promise,Xt=(0,T.f)(o,"queueMicrotask"),Jt=Xt&&Xt.value;Jt||(Ft=function(){var e,t;for(Ne&&(e=Wt.domain)&&e.exit();Mt;){t=Mt.fn,Mt=Mt.next;try{t()}catch(e){throw Mt?Ut():kt=void 0,e}}kt=void 0,e&&e.enter()},xt||Ne||Zt||!$t||!Yt?Kt&&Kt.resolve?(Bt=Kt.resolve(void 0),zt=Bt.then,Ut=function(){zt.call(Bt,Ft)}):Ut=Ne?function(){Wt.nextTick(Ft)}:function(){qt.call(o,Ft)}:(Ht=!0,Gt=Yt.createTextNode(""),new $t(Ft).observe(Gt,{characterData:!0}),Ut=function(){Gt.data=Ht=!Ht}));var Qt,en,tn,nn,rn,on=Jt||function(e){var t={fn:e,next:void 0};kt&&(kt.next=t),Mt||(Mt=t,Ut()),kt=t},cn=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=Ke(t),this.reject=Ke(n)},un={f:function(e){return new cn(e)}},an=function(e,t){if(j(e),y(t)&&t.constructor===e)return t;var n=un.f(e);return(0,n.resolve)(t),n.promise},sn=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},fn=Vt.set,ln=Ze("species"),pn="Promise",dn=te.get,hn=te.set,vn=te.getterFor(pn),mn=Re,yn=o.TypeError,gn=o.document,bn=o.process,wn=ie("fetch"),En=un.f,Sn=En,xn=!!(gn&&gn.createEvent&&o.dispatchEvent),In="function"==typeof PromiseRejectionEvent,On="unhandledrejection",Tn=Ce(pn,function(){if(k(mn)===String(mn)){if(66===Ue)return!0;if(!Ne&&!In)return!0}if(Ue>=51&&/native code/.test(mn))return!1;var e=mn.resolve(1),t=function(e){e(function(){},function(){})};return(e.constructor={})[ln]=t,!(e.then(function(){})instanceof t)}),jn=Tn||!bt(function(e){mn.all(e).catch(function(){})}),An=function(e){var t;return!(!y(e)||"function"!=typeof(t=e.then))&&t},Pn=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;on(function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var c,u,a,s=n[i++],f=o?s.ok:s.fail,l=s.resolve,p=s.reject,d=s.domain;try{f?(o||(2===e.rejection&&Rn(e),e.rejection=1),!0===f?c=r:(d&&d.enter(),c=f(r),d&&(d.exit(),a=!0)),c===s.promise?p(yn("Promise-chain cycle")):(u=An(c))?u.call(c,l,p):l(c)):p(r)}catch(e){d&&!a&&d.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Ln(e)})}},Cn=function(e,t,n){var r,i;xn?((r=gn.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),o.dispatchEvent(r)):r={promise:t,reason:n},!In&&(i=o["on"+e])?i(r):e===On&&function(e,t){var n=o.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Ln=function(e){fn.call(o,function(){var t,n=e.facade,r=e.value;if(_n(e)&&(t=sn(function(){Ne?bn.emit("unhandledRejection",r,n):Cn(On,n,r)}),e.rejection=Ne||_n(e)?2:1,t.error))throw t.value})},_n=function(e){return 1!==e.rejection&&!e.parent},Rn=function(e){fn.call(o,function(){var t=e.facade;Ne?bn.emit("rejectionHandled",t):Cn("rejectionhandled",t,e.value)})},Nn=function(e,t,n){return function(r){e(t,r,n)}},Dn=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Pn(e,!0))},Fn=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw yn("Promise can't be resolved itself");var r=An(t);r?on(function(){var n={done:!1};try{r.call(t,Nn(Fn,n,e),Nn(Dn,n,e))}catch(t){Dn(n,t,e)}}):(e.value=t,e.state=1,Pn(e,!1))}catch(t){Dn({done:!1},t,e)}}};function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}Tn&&(mn=function(e){!function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect Promise invocation")}(this,mn),Ke(e),Qt.call(this);var t=dn(this);try{e(Nn(Fn,t),Nn(Dn,t))}catch(e){Dn(t,e)}},(Qt=function(e){hn(this,{type:pn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(e,t,n){for(var r in t)ne(e,r,t[r],void 0);return e}(mn.prototype,{then:function(e,t){var n=vn(this),r=En(Et(this,mn));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Ne?bn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Pn(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),en=function(){var e=new Qt,t=dn(e);this.promise=e,this.resolve=Nn(Fn,t),this.reject=Nn(Dn,t)},un.f=En=function(e){return e===mn||e===tn?new en(e):Sn(e)},"function"==typeof Re&&(nn=Re.prototype.then,ne(Re.prototype,"then",function(e,t){var n=this;return new mn(function(e,t){nn.call(n,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof wn&&_e({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return an(mn,wn.apply(o,arguments))}}))),_e({global:!0,wrap:!0,forced:Tn},{Promise:mn}),Ye(mn,pn,!1),rn=ie(pn),c&&rn&&!rn[We]&&(0,P.f)(rn,We,{configurable:!0,get:function(){return this}}),tn=ie(pn),_e({target:pn,stat:!0,forced:Tn},{reject:function(e){var t=En(this);return t.reject.call(void 0,e),t.promise}}),_e({target:pn,stat:!0,forced:Tn},{resolve:function(e){return an(this,e)}}),_e({target:pn,stat:!0,forced:jn},{all:function(e){var t=this,n=En(t),r=n.resolve,o=n.reject,i=sn(function(){var n=Ke(t.resolve),i=[],c=0,u=1;lt(e,function(e){var a=c++,s=!1;i.push(void 0),u++,n.call(t,e).then(function(e){s||(s=!0,i[a]=e,--u||r(i))},o)}),--u||r(i)});return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=En(t),r=n.reject,o=sn(function(){var o=Ke(t.resolve);lt(e,function(e){o.call(t,e).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}}),rt||ne(Object.prototype,"toString",rt?{}.toString:function(){return"[object "+ct(this)+"]"},{unsafe:!0});var Un=function(e){return Object(v(e))},Hn=Array.isArray||function(e){return"Array"==p(e)},Gn=Ze("species"),Bn=function(e,t){var n;return Hn(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Hn(n.prototype)?y(n)&&null===(n=n[Gn])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},zn=[].push,Vn=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,c=7==e,u=5==e||i;return function(a,s,f,l){for(var p,d,v=Un(a),m=h(v),y=tt(s,f,3),g=fe(m.length),b=0,w=l||Bn,E=t?w(a,g):n||c?w(a,0):void 0;g>b;b++)if((u||b in m)&&(d=y(p=m[b],b,v),e))if(t)E[b]=d;else if(d)switch(e){case 3:return!0;case 5:return p;case 6:return b;case 2:zn.call(E,p)}else switch(e){case 4:return!1;case 7:zn.call(E,p)}return i?-1:r||o?o:E}},Zn={forEach:Vn(0),map:Vn(1),filter:Vn(2),some:Vn(3),every:Vn(4),find:Vn(5),findIndex:Vn(6),filterOut:Vn(7)},qn=Ze("species"),$n=function(e){return Ue>=51||!i(function(){var t=[];return(t.constructor={})[qn]=function(){return{foo:1}},1!==t[e](Boolean).foo})},Yn=Zn.map;_e({target:"Array",proto:!0,forced:!$n("map")},{map:function(e){return Yn(this,e,arguments.length>1?arguments[1]:void 0)}});var Wn=Object.keys||function(e){return ye(e,ge)},Kn=Object.assign,Xn=Object.defineProperty,Jn=!Kn||i(function(){if(c&&1!==Kn({b:1},Kn(Xn({},"a",{enumerable:!0,get:function(){Xn(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Kn({},e)[n]||Wn(Kn({},t)).join("")!=r})?function(e,t){for(var n=Un(e),r=arguments.length,o=1,i=Ee.f,u=s.f;r>o;)for(var a,f=h(arguments[o++]),l=i?Wn(f).concat(i(f)):Wn(f),p=l.length,d=0;p>d;)a=l[d++],c&&!u.call(f,a)||(n[a]=f[a]);return n}:Kn;_e({target:"Object",stat:!0,forced:Object.assign!==Jn},{assign:Jn});var Qn=function(){var e=j(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function er(e,t){return RegExp(e,t)}var tr,nr,rr={UNSUPPORTED_Y:i(function(){var e=er("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),BROKEN_CARET:i(function(){var e=er("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},or=RegExp.prototype.exec,ir=String.prototype.replace,cr=or,ur=(nr=/b*/g,or.call(tr=/a/,"a"),or.call(nr,"a"),0!==tr.lastIndex||0!==nr.lastIndex),ar=rr.UNSUPPORTED_Y||rr.BROKEN_CARET,sr=void 0!==/()??/.exec("")[1];(ur||sr||ar)&&(cr=function(e){var t,n,r,o,i=this,c=ar&&i.sticky,u=Qn.call(i),a=i.source,s=0,f=e;return c&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),f=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(a="(?: "+a+")",f=" "+f,s++),n=new RegExp("^(?:"+a+")",u)),sr&&(n=new RegExp("^"+a+"$(?!\\s)",u)),ur&&(t=i.lastIndex),r=or.call(c?n:i,f),c?r?(r.input=r.input.slice(s),r[0]=r[0].slice(s),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:ur&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),sr&&r&&r.length>1&&ir.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var fr=cr;_e({target:"RegExp",proto:!0,forced:/./.exec!==fr},{exec:fr});var lr=Ze("species"),pr=!i(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),dr="$0"==="a".replace(/./,"$0"),hr=Ze("replace"),vr=!!/./[hr]&&""===/./[hr]("a","$0"),mr=!i(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),yr=function(e,t,n,r){var o=Ze(e),c=!i(function(){var t={};return t[o]=function(){return 7},7!=""[e](t)}),u=c&&!i(function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[lr]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t});if(!c||!u||"replace"===e&&(!pr||!dr||vr)||"split"===e&&!mr){var a=/./[o],s=n(o,""[e],function(e,t,n,r,o){return t.exec===fr?c&&!o?{done:!0,value:a.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}},{REPLACE_KEEPS_$0:dr,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:vr}),f=s[1];ne(String.prototype,e,s[0]),ne(RegExp.prototype,o,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)})}r&&C(RegExp.prototype[o],"sham",!0)},gr=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},br=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==p(e))throw TypeError("RegExp#exec called on incompatible receiver");return fr.call(e,t)};yr("search",1,function(e,t,n){return[function(t){var n=v(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=j(e),i=String(this),c=o.lastIndex;gr(c,0)||(o.lastIndex=0);var u=br(o,i);return gr(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]});var wr=s.f,Er=function(e){return function(t){for(var n,r=m(t),o=Wn(r),i=o.length,u=0,a=[];i>u;)n=o[u++],c&&!wr.call(r,n)||a.push(e?[n,r[n]]:r[n]);return a}},Sr=[Er(!0),Er(!1)][0];_e({target:"Object",stat:!0},{entries:function(e){return Sr(e)}});var xr=Zn.filter;_e({target:"Array",proto:!0,forced:!$n("filter")},{filter:function(e){return xr(this,e,arguments.length>1?arguments[1]:void 0)}}),self.fetch||(self.fetch=function(e,t){return t=t||{},new Promise(function(n,r){var o=new XMLHttpRequest,i=[],c=[],u={},a=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:a,headers:{keys:function(){return i},entries:function(){return c},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase()in u}}}};for(var s in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){i.push(t=t.toLowerCase()),c.push([t,n]),u[t]=u[t]?u[t]+","+n:n}),n(a())},o.onerror=r,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(s,t.headers[s]);o.send(t.body||null)})});var Ir,Or=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return j(n),function(e){if(!y(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Tr=function(e,t,n){var r,o;return Or&&"function"==typeof(r=t.constructor)&&r!==n&&y(o=r.prototype)&&o!==n.prototype&&Or(e,o),e},jr=c?Object.defineProperties:function(e,t){j(e);for(var n,r=Wn(t),o=r.length,i=0;o>i;)P.f(e,n=r[i++],t[n]);return e},Ar=q("IE_PROTO"),Pr=function(){},Cr=function(e){return"<script>"+e+"<\/script>"},Lr=function(){try{Ir=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;Lr=Ir?function(e){e.write(Cr("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Ir):((t=x("iframe")).style.display="none",St.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Cr("document.F=Object")),e.close(),e.F);for(var n=ge.length;n--;)delete Lr.prototype[ge[n]];return Lr()};$[Ar]=!0;var _r=Object.create||function(e,t){var n;return null!==e?(Pr.prototype=j(e),n=new Pr,Pr.prototype=null,n[Ar]=e):n=Lr(),void 0===t?n:jr(n,t)},Rr="\t\n\v\f\r                　\u2028\u2029\ufeff",Nr="["+Rr+"]",Dr=RegExp("^"+Nr+Nr+"*"),Fr=RegExp(Nr+Nr+"*$"),Mr=function(e){return function(t){var n=String(v(t));return 1&e&&(n=n.replace(Dr,"")),2&e&&(n=n.replace(Fr,"")),n}},kr={start:Mr(1),end:Mr(2),trim:Mr(3)},Ur=we.f,Hr=T.f,Gr=P.f,Br=kr.trim,zr="Number",Vr=o.Number,Zr=Vr.prototype,qr=p(_r(Zr))==zr,$r=function(e){var t,n,r,o,i,c,u,a,s=g(e,!1);if("string"==typeof s&&s.length>2)if(43===(t=(s=Br(s)).charCodeAt(0))||45===t){if(88===(n=s.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+s}for(c=(i=s.slice(2)).length,u=0;u<c;u++)if((a=i.charCodeAt(u))<48||a>o)return NaN;return parseInt(i,r)}return+s};if(Ce(zr,!Vr(" 0o1")||!Vr("0b1")||Vr("+0x1"))){for(var Yr,Wr=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Wr&&(qr?i(function(){Zr.valueOf.call(n)}):p(n)!=zr)?Tr(new Vr($r(t)),n,Wr):$r(t)},Kr=c?Ur(Vr):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Xr=0;Kr.length>Xr;Xr++)w(Vr,Yr=Kr[Xr])&&!w(Wr,Yr)&&Gr(Wr,Yr,Hr(Vr,Yr));Wr.prototype=Zr,Zr.constructor=Wr,ne(o,zr,Wr)}var Jr=kr.trim;_e({target:"String",proto:!0,forced:i(function(){return!!Rr.trim()||"​᠎"!="​᠎".trim()||"trim"!==Rr.trim.name})},{trim:function(){return Jr(this)}});var Qr=function(e,t,n,r,o,i,c,u){for(var a,s=o,f=0,l=!!c&&tt(c,u,3);f<r;){if(f in n){if(a=l?l(n[f],f,t):n[f],i>0&&Hn(a))s=Qr(e,t,a,fe(a.length),s,i-1)-1;else{if(s>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[s]=a}s++}f++}return s},eo=Qr;_e({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=Un(this),n=fe(t.length),r=Bn(t,0);return r.length=eo(r,t,t,n,0,void 0===e?1:ae(e)),r}});var to={transform:{concat:function(e){return e.map(function(e){return ro(e)})},form:function(e){return{type:"Form",formId:e}},paymentForm:function(e){return{type:"PaymentForm",formId:e}},resource:function(e){return{type:"UIComponent",componentId:e}},url:function(e){return{type:"HostedUIComponent",url:e}},componentTemplate:function(e){return{type:"ComponentTemplate",componentId:e}},truncate:function(e){return{type:"Truncate",truncateLength:Number(e),style:"nostyle"}},truncateWithStyle:function(e,t){return{type:"Truncate",truncateLength:Number(e),style:t}},outcomeTracker:function(e,t,n,r){return{type:"OutcomeTracker",featureId:e,featureLabel:t,outcomeId:n,outcomeLabel:r}},remove:function(){return{type:"Remove"}}}},no={type:"LeavePristine"},ro=function(e){var t=e.trim().length?e:"blaize.transform.remove()";return new Function("blaize,leave_pristine",'"use strict";return ('+t+");")(to,no)},oo=function(e){return[ro(e)].flat()},io=Ze("match"),co=function(e){var t;return y(e)&&(void 0!==(t=e[io])?!!t:"RegExp"==p(e))},uo=function(e){return function(t,n){var r,o,i=String(v(t)),c=ae(n),u=i.length;return c<0||c>=u?e?"":void 0:(r=i.charCodeAt(c))<55296||r>56319||c+1===u||(o=i.charCodeAt(c+1))<56320||o>57343?e?i.charAt(c):r:e?i.slice(c,c+2):o-56320+(r-55296<<10)+65536}},ao={codeAt:uo(!1),charAt:uo(!0)},so=ao.charAt,fo=function(e,t,n){return t+(n?so(e,t).length:1)},lo=[].push,po=Math.min,ho=4294967295,vo=!i(function(){return!RegExp(ho,"y")});yr("split",2,function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(v(this)),o=void 0===n?ho:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!co(e))return t.call(r,e,o);for(var i,c,u,a=[],s=0,f=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=fr.call(f,r))&&!((c=f.lastIndex)>s&&(a.push(r.slice(s,i.index)),i.length>1&&i.index<r.length&&lo.apply(a,i.slice(1)),u=i[0].length,s=c,a.length>=o));)f.lastIndex===i.index&&f.lastIndex++;return s===r.length?!u&&f.test("")||a.push(""):a.push(r.slice(s)),a.length>o?a.slice(0,o):a}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=v(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){var i=n(r,e,this,o,r!==t);if(i.done)return i.value;var c=j(e),u=String(this),a=Et(c,RegExp),s=c.unicode,f=new a(vo?c:"^(?:"+c.source+")",(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(vo?"y":"g")),l=void 0===o?ho:o>>>0;if(0===l)return[];if(0===u.length)return null===br(f,u)?[u]:[];for(var p=0,d=0,h=[];d<u.length;){f.lastIndex=vo?d:0;var v,m=br(f,vo?u:u.slice(d));if(null===m||(v=po(fe(f.lastIndex+(vo?0:d)),u.length))===p)d=fo(u,d,s);else{if(h.push(u.slice(p,d)),h.length===l)return h;for(var y=1;y<=m.length-1;y++)if(h.push(m[y]),h.length===l)return h;d=p=v}}return h.push(u.slice(p)),h}]},!vo);var mo=function(e,t){var n=[][e];return!!n&&i(function(){n.call(null,t||function(){throw 1},1)})},yo=[].join,go=h!=Object,bo=mo("join",",");_e({target:"Array",proto:!0,forced:go||!bo},{join:function(e){return yo.call(m(this),void 0===e?",":e)}});var wo=function(e,t,n){var r=g(t);r in e?P.f(e,r,f(0,n)):e[r]=n},Eo=$n("slice"),So=Ze("species"),xo=[].slice,Io=Math.max;_e({target:"Array",proto:!0,forced:!Eo},{slice:function(e,t){var n,r,o,i=m(this),c=fe(i.length),u=de(e,c),a=de(void 0===t?c:t,c);if(Hn(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Hn(n.prototype)?y(n)&&null===(n=n[So])&&(n=void 0):n=void 0,n===Array||void 0===n))return xo.call(i,u,a);for(r=new(void 0===n?Array:n)(Io(a-u,0)),o=0;u<a;u++,o++)u in i&&wo(r,o,i[u]);return r.length=o,r}});var Oo=Ze("unscopables"),To=Array.prototype;null==To[Oo]&&P.f(To,Oo,{configurable:!0,value:_r(null)});var jo=ve.includes;_e({target:"Array",proto:!0},{includes:function(e){return jo(this,e,arguments.length>1?arguments[1]:void 0)}}),To[Oo].includes=!0;var Ao=function(e){if(co(e))throw TypeError("The method doesn't accept regular expressions");return e},Po=Ze("match");_e({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./".includes(t)}catch(e){try{return t[Po]=!1,"/./".includes(t)}catch(e){}}return!1}()},{includes:function(e){return!!~String(v(this)).indexOf(Ao(e),arguments.length>1?arguments[1]:void 0)}});var Co=Ze("isConcatSpreadable"),Lo=9007199254740991,_o="Maximum allowed index exceeded",Ro=Ue>=51||!i(function(){var e=[];return e[Co]=!1,e.concat()[0]!==e}),No=$n("concat"),Do=function(e){if(!y(e))return!1;var t=e[Co];return void 0!==t?!!t:Hn(e)};_e({target:"Array",proto:!0,forced:!Ro||!No},{concat:function(e){var t,n,r,o,i,c=Un(this),u=Bn(c,0),a=0;for(t=-1,r=arguments.length;t<r;t++)if(Do(i=-1===t?c:arguments[t])){if(a+(o=fe(i.length))>Lo)throw TypeError(_o);for(n=0;n<o;n++,a++)n in i&&wo(u,a,i[n])}else{if(a>=Lo)throw TypeError(_o);wo(u,a++,i)}return u.length=a,u}});var Fo=function(e,t,n,r){try{return r?t(j(n)[0],n[1]):t(n)}catch(t){throw st(e),t}};_e({target:"Array",stat:!0,forced:!bt(function(e){Array.from(e)})},{from:function(e){var t,n,r,o,i,c,u=Un(e),a="function"==typeof this?this:Array,s=arguments.length,f=s>1?arguments[1]:void 0,l=void 0!==f,p=at(u),d=0;if(l&&(f=tt(f,s>2?arguments[2]:void 0,2)),null==p||a==Array&&et(p))for(n=new a(t=fe(u.length));t>d;d++)c=l?f(u[d],d):u[d],wo(n,d,c);else for(i=(o=p.call(u)).next,n=new a;!(r=i.call(o)).done;d++)c=l?Fo(o,f,[r.value,d],!0):r.value,wo(n,d,c);return n.length=d,n}});var Mo,ko,Uo,Ho=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Go=q("IE_PROTO"),Bo=Object.prototype,zo=Ho?Object.getPrototypeOf:function(e){return e=Un(e),w(e,Go)?e[Go]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Bo:null},Vo=Ze("iterator"),Zo=!1;[].keys&&("next"in(Uo=[].keys())?(ko=zo(zo(Uo)))!==Object.prototype&&(Mo=ko):Zo=!0),(null==Mo||i(function(){var e={};return Mo[Vo].call(e)!==e}))&&(Mo={}),w(Mo,Vo)||C(Mo,Vo,function(){return this});var qo={IteratorPrototype:Mo,BUGGY_SAFARI_ITERATORS:Zo},$o=qo.IteratorPrototype,Yo=function(){return this},Wo=qo.IteratorPrototype,Ko=qo.BUGGY_SAFARI_ITERATORS,Xo=Ze("iterator"),Jo=function(){return this},Qo=ao.charAt,ei="String Iterator",ti=te.set,ni=te.getterFor(ei);!function(e,t,n,r,o,i,c){!function(e,t,n){var r="String Iterator";e.prototype=_r($o,{next:f(1,function(){var e,t=ni(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Qo(n,r),t.index+=e.length,{value:e,done:!1})})}),Ye(e,r,!1),Xe[r]=Yo}(n);var u,a,s=e.prototype,l=s[Xo]||s["@@iterator"]||o,p=!Ko&&l||(a=o,p||(!Ko&&a in s?s[a]:function(){return new n(this)}));l&&(u=zo(l.call(new e)),Wo!==Object.prototype&&u.next&&(zo(u)!==Wo&&(Or?Or(u,Wo):"function"!=typeof u[Xo]&&C(u,Xo,Jo)),Ye(u,"String Iterator",!0))),s[Xo]!==p&&C(s,Xo,p),Xe.String=p}(String,0,function(e){ti(this,{type:ei,string:String(e),index:0})});var ri=Zn.forEach,oi=mo("forEach")?[].forEach:function(e){return ri(this,e,arguments.length>1?arguments[1]:void 0)};for(var ii in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var ci=o[ii],ui=ci&&ci.prototype;if(ui&&ui.forEach!==oi)try{C(ui,"forEach",oi)}catch(e){ui.forEach=oi}}var ai=Function.prototype,si=ai.toString,fi=/^\s*function ([^ (]*)/,li="name";c&&!(li in ai)&&(0,P.f)(ai,li,{configurable:!0,get:function(){try{return si.call(this).match(fi)[1]}catch(e){return""}}});var pi=function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=[].concat(Array.from(t.head.children),Array.from(t.body.children));if(!n.length)return document.createTextNode(e);var r=document.createDocumentFragment();return n.forEach(function(e){return r.appendChild(e)}),di(r),r},di=function(e){var t=e.querySelectorAll("script");t.length&&Array.from(t).map(function(e){var t=document.createElement("script");Array.from(e.attributes).forEach(function(e){t.setAttribute(e.name,e.value)}),t.innerHTML=e.innerHTML,e.parentNode.appendChild(t),e.parentNode.removeChild(e)})},hi=function(e,t,n){void 0===n&&(n={}),e.forEach(function(e){var r=e.parentNode,o=Array.from(r.children).indexOf(e),i=r.removeChild(e),c=t.map(function(e){return function(e,t,n){switch(t.type){case"LeavePristine":return e;case"Truncate":return function(e,t){var n=2*t.truncateLength,r=e.outerHTML.trim().split(/\s+/);if(t.truncateLength>=r.length)return e;for(var o,i=!1,c=0,u=0,a=kn(r);!(o=a()).done;){var s=o.value;if(u++,s.includes("<")&&(i=!0),s.includes(">")&&(i=!1),!i&&(++c>=t.truncateLength&&s.includes(".")||c==n))break}var f=r.slice(0,u).join(" ");c===n&&(f+="...\n");var l,p=(new DOMParser).parseFromString(f,"text/html").body.children[0];switch(t.style){case"fadeout":var d=document.createElement("div");d.style.position="absolute",d.style.height="100%",d.style.width="100%",d.style.bottom=0,d.style.backgroundImage="linear-gradient(0deg, #fff 0%, rgba(255, 255, 255, 0) 100%)",p.appendChild(d),(l=document.createElement("div")).style.position="relative",l.appendChild(p);break;case"linebreak":var h=document.createElement("hr");h.style.border="1px solid #ebebeb",p.appendChild(h),l=p;break;case"nostyle":default:l=p}return l}(e,t);case"OutcomeTracker":!function(e){window.Zephr||(window.Zephr={}),window.Zephr.outcomes||(window.Zephr.outcomes={}),window.Zephr.outcomes[e.featureId]={featureLabel:e.featureLabel,outcomeId:e.outcomeId,outcomeLabel:e.outcomeLabel}}(t);break;case"Form":return function(e,t){if(t.forms&&t.forms[e.formId])return pi(t.forms[e.formId]);console.error("Form not found.")}(t,n);case"PaymentForm":return function(e,t){if(t.paymentForms&&t.paymentForms[e.formId])return pi(t.paymentForms[e.formId]);console.error("Payment form not found.")}(t,n);case"UIComponent":return function(e,t){if(t.uiComponents&&t.uiComponents[e.componentId])return pi(t.uiComponents[e.componentId]);console.error("UI component not found.")}(t,n);case"HostedUIComponent":return function(e,t){if(t.hostedUiComponents&&t.hostedUiComponents[e.url])return pi(t.hostedUiComponents[e.url]);console.error("Hosted UI component not found.")}(t,n);case"ComponentTemplate":return function(e,t){if(t.componentTemplates&&t.componentTemplates[e.componentId])return pi(t.componentTemplates[e.componentId]);console.error("Component template not found.")}(t,n);case"Remove":break;default:console.error("No matching outcome type "+t.type)}}(i,e,n)}).filter(Boolean),u=document.createDocumentFragment();c.forEach(function(e){return u.appendChild(e)}),o<r.children.length?r.insertBefore(u,r.children[o]):r.appendChild(u)})};function vi(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var mi=function(){function e(e){this.cdnApi=e||""}var t=e.prototype;return t.fetchLiveFeatures=function(){try{var e=this;return Promise.resolve(vi(function(){return Promise.resolve(fetch(e.cdnApi+"/zephr/features").then(function(e){return e.json()}))},function(){return Promise.reject(new Error("Live features endpoint failed."))}))}catch(e){return Promise.reject(e)}},t.fetchDecisions=function(e,t){var n=void 0===t?{customData:{}}:t,r=n.jwt,o=n.customData,i=void 0===o?{}:o;try{var c=this,u=e.map(function(e){return e.id});return Promise.resolve(vi(function(){return Promise.resolve(fetch(c.cdnApi+"/zephr/feature-decisions",{method:"POST",credentials:"include",headers:Object.assign({"Content-Type":"application/json",Accept:"application/json"},r&&{Authorization:"Bearer "+r}),body:JSON.stringify({path:document.location.pathname+document.location.search+document.location.hash,referer:document.referrer,featureIds:u,customData:i})}).then(function(e){return e.json()}))},function(){return Promise.reject(new Error("Feature decisions endpoint failed."))}))}catch(e){return Promise.reject(e)}},t.executeDecisions=function(e,t){for(var n,r=kn(e);!(n=r()).done;){var o=n.value,i=(t.featureResults||{})[o.id];if(i){var c=oo(i),u=this.selectFeatureNodes(o);hi(u,c,t.resources||{})}}if(t.accessDetails)if(window.Zephr||(window.Zephr={}),window.Zephr.accessDetails){var a=window.Zephr.accessDetails,s=t.accessDetails;window.Zephr.accessDetails=Object.assign({},a,s,{authenticated:s.authenticated,accessDecisions:Object.assign({},a.accessDecisions,s.accessDecisions),entitlements:this._mergeCreditData(a.entitlements,s.entitlements),credits:this._mergeCreditData(a.credits,s.credits),meters:this._mergeCreditData(a.meters,s.meters)})}else window.Zephr.accessDetails=t.accessDetails},t._mergeCreditData=function(e,t){for(var n=Object.assign({},e,t),r=0,o=Object.entries(e);r<o.length;r++){var i=o[r],c=i[0],u=i[1],a=t[c];if(a){var s=n[c];this._eitherHasProperty(u,a,"decrementedInDecision")&&(s.decrementedInDecision=!(!u.decrementedInDecision&&!a.decrementedInDecision)),this._eitherHasProperty(u,a,"usedInDecision")&&(s.usedInDecision=!(!u.usedInDecision&&!a.usedInDecision)),this._eitherHasProperty(u,a,"remainingCredits")&&(s.remainingCredits=this._minOrNumber(u.remainingCredits,a.remainingCredits)),this._eitherHasProperty(u,a,"totalCredits")&&(s.totalCredits=this._minOrNumber(u.totalCredits,a.totalCredits))}}return n},t._eitherHasProperty=function(e,t,n){return e&&e.hasOwnProperty(n)||t&&t.hasOwnProperty(n)},t._minOrNumber=function(e,t){var n="number"==typeof e,r="number"==typeof t;return n&&r?Math.min(e,t):n?e:r?t:void 0},t.findFeatures=function(e){return Array.isArray(e)&&e.length?e.filter(function(e){return"COMMENT_TAG"!==e.targetType&&null!==document.querySelector(e.cssSelector)}):[]},t.selectFeatureNodes=function(e){return document.querySelectorAll(e.cssSelector)},e}(),yi=function(e){return new mi(e)};e.createInstance=yi,e.run=function(e){try{var t="",n={};"string"==typeof e?t=e:"object"==typeof e&&(n=e,t=e.cdnApi||"");var r=yi(t);return Promise.resolve(r.fetchLiveFeatures()).then(function(e){function t(){var e,t;return document.dispatchEvent((e="zephr.browserDecisionsFinished","function"==typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t)),r}console.log("Live Features:",e);var o=r.findFeatures(e),i=function(){if(o.length)return console.log("Features on page:",o),Promise.resolve(r.fetchDecisions(o,n)).then(function(e){console.log("Decisions:",e),r.executeDecisions(o,e)});console.log("No features found on page.")}();return i&&i.then?i.then(t):t()})}catch(e){return Promise.reject(e)}}});
